{"version":3,"sources":["contexts/AuthContext.js","components/AppHeaderAuth/AppHeaderAuth.js","components/AppHeader/AppHeader.js","components/SearchBar/Suggestions/Suggestions.js","components/SearchBar/SearchBar.js","pages/Home/Home.js","components/Results/Result/Result.js","components/Results/Results.js","components/Pager/Pager.js","components/Facets/CheckboxFacet/CheckboxFacet.js","components/Facets/Facets.js","pages/Search/Search.js","pages/Details/Details.js","App/App.js","index.js"],"names":["AuthContext","createContext","AppHeaderAuth","user","useContext","console","log","JSON","stringify","authElement","document","querySelector","html","clientPrincipal","userDetails","innerHTML","className","AppHeader","href","src","alt","type","data-toggle","data-target","aria-controls","aria-expanded","aria-label","id","Suggestions","props","suggestionClickHandler","e","currentTarget","suggestions","map","s","index","key","text","onMouseDown","style","border","boxShadow","boxSizing","SearchBar","suggestionDiv","useState","q","setQ","setSuggestions","showSuggestions","setShowSuggestions","onSearchHandler","postSearchHandler","useEffect","_","timer","setTimeout","body","top","suggester","axios","post","then","response","data","catch","error","clearTimeout","getElementById","value","onKeyDown","keyCode","autoComplete","placeholder","onChange","searchTerm","searchChangeHandler","defaultValue","onBlur","onClick","Home","history","useHistory","push","Result","image_url","original_title","Results","results","documents","result","beginDocNumber","Math","min","skip","count","endDocNumber","toLocaleString","Pager","currentPage","selectedPage","setSelectedPage","totalPages","ceil","resultCount","resultsPerPage","setCurrentPage","previousButton","nextButton","i","page_links","minPage","maxPage","parseInt","CheckboxFacet","isExpanded","setIsExpanded","checkboxes","values","facetValue","isSelected","selectedFacets","some","facet","FacetValueListItem","dense","disableGutters","Checkbox","edge","disableRipple","checked","removeFilter","field","name","addFilter","ListItemText","primary","FacetListItem","button","mapFacetName","ExpandLess","ExpandMore","Collapse","in","component","FacetValuesList","styled","ListItem","paddingLeft","List","maxHeight","overflowY","marginRight","Facets","facetName","string","trim","toUpperCase","substring","replace","newFilters","filters","concat","setFilters","filter","item","facets","Object","keys","f","Chip","label","onDelete","FacetList","marginTop","Search","location","useLocation","setResults","setResultCount","URLSearchParams","search","get","setSkip","setFacets","isLoading","setIsLoading","CircularProgress","Details","useParams","setDocument","selectedTab","setTab","doc","detailsBody","resultStyle","rawStyle","authors","join","original_publication_year","isbn","Rating","average_rating","precision","readOnly","ratings_count","App","setUser","a","fetch","contentType","headers","indexOf","json","fetchAuth","Provider","path","exact","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.b2a3f736.chunk.js","sourcesContent":["import { createContext, useContext } from 'react';\r\n\r\n// Create new auth context\r\nexport const AuthContext = createContext();\r\n\r\n// React hook to use auth context\r\nexport function useAuth() {\r\n  return useContext(AuthContext);\r\n}\r\n","import React from 'react';\r\n\r\n// React Context for Auth\r\nimport { useAuth } from '../../contexts/AuthContext';\r\n\r\nexport default function AppHeaderAuth() {\r\n  // React Context: User Authentication\r\n  const user = useAuth();\r\n  \r\n  console.log(`user = ${JSON.stringify(user)}`);\r\n\r\n  // Dynamically update auth div based on user context\r\n  const authElement = document.querySelector('.auth');\r\n  if (authElement) {\r\n    // Default sign in\r\n    let html = '<a href=\"/login\" class=\"auth-link\">Sign In</a>';\r\n    \r\n    // User profile and sign out\r\n    let clientPrincipal = (user && user.clientPrincipal) || null,\r\n        userDetails     = (clientPrincipal && clientPrincipal.userDetails) || null;\r\n\r\n    if (userDetails) {\r\n      html = `${userDetails} | <a href=\"/logout\" class=\"auth-link\">Sign Out</a>`;\r\n    }\r\n\r\n    authElement.innerHTML = html;\r\n  }\r\n\r\n  return (\r\n    <div className=\"auth\"></div>\r\n  );\r\n};\r\n","import React from 'react';\nimport AppHeaderAuth from '../AppHeaderAuth/AppHeaderAuth';\n\nimport './AppHeader.css';\n\nexport default function AppHeader() {\n  return (\n    <header className=\"header\">\n      <nav className=\"navbar navbar-expand-lg\">\n        <a className=\"navbar-brand\" href=\"/\">\n          <img src=\"/images/microsoft-small.svg\" className=\"navbar-logo\" alt=\"Microsoft\" />\n        </a>\n        <button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n          <span className=\"navbar-toggler-icon\"></span>\n        </button>\n\n        <div className=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n          <ul className=\"navbar-nav mr-auto\">\n            <li className=\"nav-item\">\n              <a className=\"nav-link\" href=\"/Search\">Search</a>\n            </li>\n            <li className=\"nav-item\">\n              <a className=\"nav-link\" href=\"https://azure.microsoft.com/services/search/\">Learn more</a>\n            </li>\n          </ul>\n        </div>\n\n        <AppHeaderAuth />\n      </nav>\n      \n    </header>\n  );\n};\n","import React from 'react';\n\nimport \"./Suggestions.css\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nexport default function Suggestions(props) {\n\n    const suggestionClickHandler = (e) => {\n        props.suggestionClickHandler(e.currentTarget.id);\n    }\n\n    const borders = {\n        border: \"1px solid #eee\",\n        boxShadow: \"0 2px 3px #ccc\",\n        boxSizing: \"border-box\"\n    }\n\n    let suggestions = props.suggestions.map((s, index) => {\n        return (<div className=\"suggestion-item\" key={index} id={s.text} onMouseDown={suggestionClickHandler}>{s.text}</div>);\n      });\n\n    return (\n        <div style={borders}>\n            {suggestions}\n        </div>\n    );\n};\n","import React, {useState, useEffect} from 'react';\nimport axios from 'axios';\nimport Suggestions from './Suggestions/Suggestions';\n\nimport \"./SearchBar.css\";\n\nexport default function SearchBar(props) {\n\n    let [q, setQ] = useState(\"\");\n    let [suggestions, setSuggestions] = useState([]);\n    let [showSuggestions, setShowSuggestions] = useState(false);\n\n    const onSearchHandler = () => {\n        props.postSearchHandler(q);\n        setShowSuggestions(false);\n    }\n\n    const suggestionClickHandler = (s) => {\n        document.getElementById(\"search-box\").value = s;\n        setShowSuggestions(false);\n        props.postSearchHandler(s);    \n    }\n\n    const onEnterButton = (event) => {\n        if (event.keyCode === 13) {\n            onSearchHandler();\n        }\n    }\n\n    const onChangeHandler = () => {\n        var searchTerm = document.getElementById(\"search-box\").value;\n        setShowSuggestions(true);\n        setQ(searchTerm);\n\n        // use this prop if you want to make the search more reactive\n        if (props.searchChangeHandler) {\n            props.searchChangeHandler(searchTerm);\n        }\n    }\n\n    useEffect(_ =>{\n        const timer = setTimeout(() => {\n            const body = {\n                q: q,\n                top: 5,\n                suggester: 'sg'\n            };\n\n            if (q === '') {\n                setSuggestions([]);\n            } else {\n                axios.post( '/api/suggest', body)\n                .then(response => {\n                    console.log(JSON.stringify(response.data))\n                    setSuggestions(response.data.suggestions);\n                } )\n                .catch(error => {\n                    console.log(error);\n                    setSuggestions([]);\n                });\n            }\n        }, 300);\n        return () => clearTimeout(timer);\n    }, [q, props]);\n\n    var suggestionDiv;\n    if (showSuggestions) {\n        suggestionDiv = (<Suggestions suggestions={suggestions} suggestionClickHandler={(s) => suggestionClickHandler(s)}></Suggestions>);\n    } else {\n        suggestionDiv = (<div></div>);\n    }\n\n    return (\n        <div >\n            <div className=\"input-group\" onKeyDown={e => onEnterButton(e)}>\n                <div className=\"suggestions\" >\n                    <input \n                        autoComplete=\"off\" // setting for browsers; not the app\n                        type=\"text\" \n                        id=\"search-box\" \n                        className=\"form-control rounded-0\" \n                        placeholder=\"What are you looking for?\" \n                        onChange={onChangeHandler} \n                        defaultValue={props.q}\n                        onBlur={() => setShowSuggestions(false)}\n                        onClick={() => setShowSuggestions(true)}>\n                    </input>\n                    {suggestionDiv}\n                </div>\n                <div className=\"input-group-btn\">\n                    <button className=\"btn btn-primary rounded-0\" type=\"submit\" onClick={onSearchHandler}>\n                        Search\n                    </button>\n                </div>\n            </div>\n        </div>\n    );\n};","import React from \"react\";\nimport { useHistory } from \"react-router-dom\";\n\nimport SearchBar from '../../components/SearchBar/SearchBar';\n\nimport \"./Home.css\";\nimport \"../../pages/Search/Search.css\";\n\nexport default function Home() {\n  const history = useHistory();\n  const navigateToSearchPage = (q) => {\n    if (!q || q === '') {\n      q = '*'\n    }\n    history.push('/search?q=' + q);\n  }\n\n  return (\n    <main className=\"main main--home\">\n      <div className=\"row home-search\">\n        <img className=\"logo\" src=\"/images/cognitive-search.png\" alt=\"Cognitive Search\"></img>\n        <p className=\"poweredby lead\">Powered by Azure Cognitive Search</p>\n        <SearchBar postSearchHandler={navigateToSearchPage}></SearchBar>\n      </div>\n    </main>\n  );\n};\n","import React from 'react';\n\nimport './Result.css';\n\nexport default function Result(props) {\n    \n    console.log(`result prop = ${JSON.stringify(props)}`)\n    \n    return(\n    <div className=\"card result\">\n        <a href={`/details/${props.document.id}`}>\n            <img className=\"card-img-top\" src={props.document.image_url} alt={props.document.original_title}></img>\n            <div className=\"card-body\">\n                <h6 className=\"title-style\">{props.document.original_title}</h6>\n            </div>\n        </a>\n    </div>\n    );\n}\n","import React from 'react';\nimport Result from './Result/Result';\n\nimport \"./Results.css\";\n\nexport default function Results(props) {\n\n  let results = props.documents.map((result, index) => {\n    return <Result \n        key={index} \n        document={result.document}\n      />;\n  });\n\n  let beginDocNumber = Math.min(props.skip + 1, props.count);\n  let endDocNumber = Math.min(props.skip + props.top, props.count);\n\n  return (\n    <div>\n      <p className=\"results-info\">Showing {beginDocNumber}-{endDocNumber} of {props.count.toLocaleString()} results</p>\n      <div className=\"row row-cols-md-5 results\">\n        {results}\n      </div>\n    </div>\n  );\n};\n","import React, {useState, useEffect} from 'react';\n\nimport './Pager.css';\n\nexport default function Pager(props) {\n\n    let [selectedPage, setSelectedPage] = useState(props.currentPage);\n    let totalPages = Math.ceil(props.resultCount / props.resultsPerPage);\n\n    useEffect(_=>{\n        props.setCurrentPage(selectedPage);\n    }, [selectedPage, props]);\n\n    function goToNextPage() {\n        setSelectedPage(selectedPage + 1);\n    }\n\n    function goToPreviousPage() {\n        setSelectedPage(selectedPage - 1);\n    }\n\n    var i = 0;\n    var page_links = [];\n\n    var minPage = 1;\n    var maxPage = totalPages;\n\n    if (selectedPage - minPage > 2) {\n        minPage = selectedPage - 2;\n    }\n\n    if (maxPage - selectedPage > 2) {\n        maxPage = parseInt(selectedPage) + 2;\n    }\n\n\n    for (i = minPage; i <= maxPage; i++) {\n        if (i === parseInt(selectedPage)) {\n            page_links.push(\n                <li className=\"page-item active\" key={i}>\n                    <span className=\"page-link\">\n                        {i}\n                    </span>\n                </li>\n            );\n        } else {\n            page_links.push(\n                <li className=\"page-item\" key={i}>\n                    <button className=\"page-link\" id={i} onClick={(e) => setSelectedPage(e.currentTarget.id)}>{i}</button>\n                </li>\n            );\n        }\n    }\n\n    var previousButton;\n    if (parseInt(selectedPage) === 1) {\n        previousButton = (<li className=\"page-item disabled\" key=\"prev\">\n                            <span className=\"page-link\">Previous</span>\n                        </li>);\n    } else {\n        previousButton = (<li className=\"page-item\" key=\"prev\" onClick={goToPreviousPage}>\n                            <button className=\"page-link\">Previous</button>\n                        </li>);\n    }\n\n    var nextButton;\n    if (parseInt(selectedPage) === totalPages) {\n        nextButton = (<li className=\"page-item disabled\" key=\"next\">\n                            <span className=\"page-link\">Next</span>\n                        </li>);\n    } else {\n        nextButton = (<li className=\"page-item\" key=\"next\" >\n                            <button className=\"page-link\" onClick={goToNextPage}>Next</button>\n                        </li>);\n    }\n\n    \n\n    return (\n        <nav aria-label=\"...\"  className=\"pager\">\n            <ul className=\"pagination item\">\n                {previousButton}\n                {page_links}\n                {nextButton}\n            </ul>\n        </nav>\n    );\n\n    }","import React, {useState} from 'react';\nimport { Collapse, Checkbox, List, ListItem, ListItemText } from '@material-ui/core';\nimport { ExpandLess, ExpandMore } from '@material-ui/icons';\nimport styled from 'styled-components';\n\nimport './CheckboxFacet.css';\n\nexport default function CheckboxFacet(props) {\n\n    let [isExpanded, setIsExpanded] = useState(false);\n\n    const checkboxes = props.values.map(facetValue => {\n\n        let isSelected = props.selectedFacets.some(facet => facet.value === facetValue.value);\n        \n        return (\n            <FacetValueListItem dense disableGutters id={facetValue.value}>\n                <Checkbox \n                    edge=\"start\" \n                    disableRipple \n                    checked={isSelected}\n                    onClick= {\n                        isSelected ? \n                        () => props.removeFilter({field: props.name, value: facetValue.value}) :\n                        () => props.addFilter(props.name, facetValue.value)\n                    }\n                />\n                <ListItemText primary={facetValue.value + \" (\" + facetValue.count + \")\"}/>\n            </FacetValueListItem>\n        );\n    });\n\n\n    return (\n        <div>\n            <FacetListItem disableRipple={true} button onClick={() => setIsExpanded(!isExpanded)}>\n                <ListItemText \n                    primary={props.mapFacetName(props.name)}\n                />\n                {isExpanded ? <ExpandLess /> : <ExpandMore />}\n            </FacetListItem>\n            <Collapse in={isExpanded} component=\"div\">\n                <FacetValuesList>\n                    {checkboxes}\n                </FacetValuesList>\n            </Collapse>\n        </div>\n    );\n}\n\nconst FacetListItem = styled(ListItem)({\n    paddingLeft: '36px !important',\n})\n\nconst FacetValueListItem= styled(ListItem)({\n    paddingLeft: '46px !important',\n});\n\nconst FacetValuesList= styled(List)({\n    maxHeight: 340,\n    overflowY: 'auto !important',\n    marginRight: '18px !important'\n})","import React from 'react';\nimport { List, Chip } from '@material-ui/core';\nimport CheckboxFacet from './CheckboxFacet/CheckboxFacet';\nimport styled from 'styled-components';\nimport \"./Facets.css\";\n\nexport default function Facets(props) {\n\n    function mapFacetName(facetName) {\n        const capitalizeFirstLetter = (string) =>\n            string[0] ? `${string[0].toUpperCase()}${string.substring(1)}` : '';\n        facetName = facetName.trim();\n        facetName = capitalizeFirstLetter(facetName);\n\n        facetName = facetName.replace('_', ' ');\n        return facetName;\n    }\n\n    function addFilter(name, value) {\n        const newFilters = props.filters.concat({ field: name, value: value });\n        props.setFilters(newFilters);\n    }\n\n    function removeFilter(filter) {      \n        const newFilters = props.filters.filter((item) => item.value !== filter.value);\n        props.setFilters(newFilters);\n    }\n\n    var facets;\n    try{\n        facets = Object.keys(props.facets).map(key => {\n            return <CheckboxFacet \n                key={key}\n                name={key} \n                values={props.facets[key]}\n                addFilter={addFilter}\n                removeFilter={removeFilter}\n                mapFacetName={mapFacetName}\n                selectedFacets={props.filters.filter( f => f.field === key)}\n              />;\n          });\n    } catch (error) {\n        console.log(error);\n    }\n\n    const filters = props.filters.map((filter, index) => {\n            return (\n            <li key={index}>\n                <Chip \n                    label={`${mapFacetName(filter.field)}: ${filter.value}`} \n                    onDelete={() => removeFilter(filter)}\n                    className=\"chip\"\n              />\n            </li>);\n          });\n\n\n    return (\n        <div id=\"facetPanel\" className=\"box\">\n            <div className=\"facetbox\">\n                <div id=\"clearFilters\">\n                <ul className=\"filterlist\">\n                    {filters}\n                </ul>\n                </div>\n                <FacetList component=\"nav\" className=\"listitem\" >\n                    {facets}\n                </FacetList>    \n            </div>\n        </div>\n    );\n};\n\nconst FacetList = styled(List)({\n    marginTop: '32px !important'\n})\n","import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport CircularProgress  from '@material-ui/core/CircularProgress';\nimport { useLocation, useHistory } from \"react-router-dom\";\n\nimport Results from '../../components/Results/Results';\nimport Pager from '../../components/Pager/Pager';\nimport Facets from '../../components/Facets/Facets';\nimport SearchBar from '../../components/SearchBar/SearchBar';\n\nimport \"./Search.css\";\n\nexport default function Search() {\n  \n  let location = useLocation();\n  let history = useHistory();\n  \n  const [ results, setResults ] = useState([]);\n  const [ resultCount, setResultCount ] = useState(0);\n  const [ currentPage, setCurrentPage ] = useState(1);\n  const [ q, setQ ] = useState(new URLSearchParams(location.search).get('q') ?? \"*\");\n  const [ top ] = useState(new URLSearchParams(location.search).get('top') ?? 8);\n  const [ skip, setSkip ] = useState(new URLSearchParams(location.search).get('skip') ?? 0);\n  const [ filters, setFilters ] = useState([]);\n  const [ facets, setFacets ] = useState({});\n  const [ isLoading, setIsLoading ] = useState(true);\n\n  let resultsPerPage = top;\n  \n  useEffect(() => {\n    setIsLoading(true);\n    setSkip((currentPage-1) * top);\n    const body = {\n      q: q,\n      top: top,\n      skip: skip,\n      filters: filters\n    };\n\n    axios.post( '/api/search', body)\n      .then(response => {\n            //console.log(JSON.stringify(response.data))\n            setResults(response.data.results);\n            setFacets(response.data.facets);\n            setResultCount(response.data.count);\n            setIsLoading(false);\n        } )\n        .catch(error => {\n            console.log(error);\n            setIsLoading(false);\n        });\n    \n  }, [q, top, skip, filters, currentPage]);\n\n  // pushing the new search term to history when q is updated\n  // allows the back button to work as expected when coming back from the details page\n  useEffect(() => {\n    history.push('/search?q=' + q);  \n    setCurrentPage(1);\n    setFilters([]);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [q]);\n\n\n  let postSearchHandler = (searchTerm) => {\n    //console.log(searchTerm);\n    setQ(searchTerm);\n  }\n\n  var body;\n  if (isLoading) {\n    body = (\n      <div className=\"col-md-9\">\n        <CircularProgress />\n      </div>);\n  } else {\n    body = (\n      <div className=\"col-md-9\">\n        <Results documents={results} top={top} skip={skip} count={resultCount}></Results>\n        <Pager className=\"pager-style\" currentPage={currentPage} resultCount={resultCount} resultsPerPage={resultsPerPage} setCurrentPage={setCurrentPage}></Pager>\n      </div>\n    )\n  }\n\n  return (\n    <main className=\"main main--search container-fluid\">\n      \n      <div className=\"row\">\n        <div className=\"col-md-3\">\n          <div className=\"search-bar\">\n            <SearchBar postSearchHandler={postSearchHandler} q={q}></SearchBar>\n          </div>\n          <Facets facets={facets} filters={filters} setFilters={setFilters}></Facets>\n        </div>\n        {body}\n      </div>\n    </main>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport { useParams } from 'react-router-dom';\nimport Rating from '@material-ui/lab/Rating';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport axios from 'axios';\n\nimport \"./Details.css\";\n\nexport default function Details() {\n\n  let { id } = useParams();\n  const [document, setDocument] = useState({});\n  const [selectedTab, setTab] = useState(0);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    setIsLoading(true);\n    // console.log(id);\n    axios.get('/api/lookup?id=' + id)\n      .then(response => {\n        //console.log(JSON.stringify(response.data))\n        const doc = response.data.document;\n        setDocument(doc);\n        setIsLoading(false);\n      })\n      .catch(error => {\n        console.log(error);\n        setIsLoading(false);\n      });\n\n  }, [id]);\n\n  // View default is loading with no active tab\n  let detailsBody = (<CircularProgress />),\n      resultStyle = \"nav-link\",\n      rawStyle    = \"nav-link\";\n\n  if (!isLoading && document) {\n    // View result\n    if (selectedTab === 0) {\n      resultStyle += \" active\";\n      detailsBody = (\n        <div className=\"card-body\">\n          <h5 className=\"card-title\">{document.original_title}</h5>\n          <img className=\"image\" src={document.image_url} alt=\"Book cover\"></img>\n          <p className=\"card-text\">{document.authors?.join('; ')} - {document.original_publication_year}</p>\n          <p className=\"card-text\">ISBN {document.isbn}</p>\n          <Rating name=\"half-rating-read\" value={parseInt(document.average_rating)} precision={0.1} readOnly></Rating>\n          <p className=\"card-text\">{document.ratings_count} Ratings</p>\n        </div>\n      );\n    }\n\n    // View raw data\n    else {\n      rawStyle += \" active\";\n      detailsBody = (\n        <div className=\"card-body text-left\">\n          <pre><code>\n            {JSON.stringify(document, null, 2)}\n          </code></pre>\n        </div>\n      );\n    }\n  }\n\n  return (\n    <main className=\"main main--details container fluid\">\n      <div className=\"card text-center result-container\">\n        <div className=\"card-header\">\n          <ul className=\"nav nav-tabs card-header-tabs\">\n              <li className=\"nav-item\"><button className={resultStyle} onClick={() => setTab(0)}>Result</button></li>\n              <li className=\"nav-item\"><button className={rawStyle} onClick={() => setTab(1)}>Raw Data</button></li>\n          </ul>\n        </div>\n        {detailsBody}\n      </div>\n    </main>\n  );\n}\n","import React, {useState, useEffect} from 'react';\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\n\n// Context for user authentication\nimport { AuthContext } from '../contexts/AuthContext';\n\n// App shell components\nimport AppHeader from '../components/AppHeader/AppHeader';\n//import AppFooter from '../components/AppFooter/AppFooter';\n\n// React Router page components\nimport Home from '../pages/Home/Home';\nimport Search from '../pages/Search/Search';\nimport Details from '../pages/Details/Details';\n\n// Bootstrap styles, optionally with jQuery and Popper\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\n// Custom app styles\nimport './App.css';\n\nexport default function App() {\n  // React Hook: useState with a var name, set function, & default value\n  const [user, setUser] = useState({});\n\n  // Fetch authentication API & set user state\n  async function fetchAuth() {\n    const response = await fetch(\"/.auth/me\");\n    if (response) {\n      const contentType = response.headers.get(\"content-type\");\n      if (contentType && contentType.indexOf(\"application/json\") !== -1) {\n        response.json()\n          .then(response => setUser(response))\n          .catch(error => console.error('Error:', error));\n      }\n    }\n  }\n\n  // React Hook: useEffect when component changes\n  // Empty array ensure this only runs once on mount\n  useEffect(() => {\n    fetchAuth()\n  }, []);\n\n  return (\n    <AuthContext.Provider value={user}>\n      <div className=\"container-fluid app\">\n        <AppHeader />\n        <Router>\n          <Switch>\n            <Route path=\"/\" exact component={Home} />\n            <Route path=\"/search\" component={Search} />\n            <Route path=\"/details/:id\" component={Details} />\n          </Switch>\n        </Router>\n        {/* <AppFooter /> */}\n      </div>\n    </AuthContext.Provider>\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}