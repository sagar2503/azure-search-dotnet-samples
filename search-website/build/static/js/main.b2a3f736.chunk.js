(this.webpackJsonpsample=this.webpackJsonpsample||[]).push([[0],{100:function(e,a,t){},106:function(e,a,t){},107:function(e,a,t){},108:function(e,a,t){},109:function(e,a,t){},110:function(e,a,t){},111:function(e,a,t){},112:function(e,a,t){},113:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),r=t(15),l=t.n(r),s=t(38),i=t.n(s),o=t(56),u=t(7),m=t(27),d=t(9),p=Object(n.createContext)();function f(){var e=Object(n.useContext)(p);console.log("user = ".concat(JSON.stringify(e)));var a=document.querySelector(".auth");if(a){var t='<a href="/login" class="auth-link">Sign In</a>',r=e&&e.clientPrincipal||null,l=r&&r.userDetails||null;l&&(t="".concat(l,' | <a href="/logout" class="auth-link">Sign Out</a>')),a.innerHTML=t}return c.a.createElement("div",{className:"auth"})}t(79);function v(){return c.a.createElement("header",{className:"header"},c.a.createElement("nav",{className:"navbar navbar-expand-lg"},c.a.createElement("a",{className:"navbar-brand",href:"/"},c.a.createElement("img",{src:"/images/microsoft-small.svg",className:"navbar-logo",alt:"Microsoft"})),c.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},c.a.createElement("span",{className:"navbar-toggler-icon"})),c.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},c.a.createElement("ul",{className:"navbar-nav mr-auto"},c.a.createElement("li",{className:"nav-item"},c.a.createElement("a",{className:"nav-link",href:"/Search"},"Search")),c.a.createElement("li",{className:"nav-item"},c.a.createElement("a",{className:"nav-link",href:"https://azure.microsoft.com/services/search/"},"Learn more")))),c.a.createElement(f,null)))}var g=t(23),E=t.n(g);t(98),t(54);function b(e){var a=function(a){e.suggestionClickHandler(a.currentTarget.id)},t=e.suggestions.map((function(e,t){return c.a.createElement("div",{className:"suggestion-item",key:t,id:e.text,onMouseDown:a},e.text)}));return c.a.createElement("div",{style:{border:"1px solid #eee",boxShadow:"0 2px 3px #ccc",boxSizing:"border-box"}},t)}t(99);function h(e){var a,t=Object(n.useState)(""),r=Object(u.a)(t,2),l=r[0],s=r[1],i=Object(n.useState)([]),o=Object(u.a)(i,2),m=o[0],d=o[1],p=Object(n.useState)(!1),f=Object(u.a)(p,2),v=f[0],g=f[1],h=function(){e.postSearchHandler(l),g(!1)};return Object(n.useEffect)((function(e){var a=setTimeout((function(){var e={q:l,top:5,suggester:"sg"};""===l?d([]):E.a.post("/api/suggest",e).then((function(e){console.log(JSON.stringify(e.data)),d(e.data.suggestions)})).catch((function(e){console.log(e),d([])}))}),300);return function(){return clearTimeout(a)}}),[l,e]),a=v?c.a.createElement(b,{suggestions:m,suggestionClickHandler:function(a){return function(a){document.getElementById("search-box").value=a,g(!1),e.postSearchHandler(a)}(a)}}):c.a.createElement("div",null),c.a.createElement("div",null,c.a.createElement("div",{className:"input-group",onKeyDown:function(e){13===e.keyCode&&h()}},c.a.createElement("div",{className:"suggestions"},c.a.createElement("input",{autoComplete:"off",type:"text",id:"search-box",className:"form-control rounded-0",placeholder:"What are you looking for?",onChange:function(){var a=document.getElementById("search-box").value;g(!0),s(a),e.searchChangeHandler&&e.searchChangeHandler(a)},defaultValue:e.q,onBlur:function(){return g(!1)},onClick:function(){return g(!0)}}),a),c.a.createElement("div",{className:"input-group-btn"},c.a.createElement("button",{className:"btn btn-primary rounded-0",type:"submit",onClick:h},"Search"))))}t(100),t(55);function N(){var e=Object(d.f)();return c.a.createElement("main",{className:"main main--home"},c.a.createElement("div",{className:"row home-search"},c.a.createElement("img",{className:"logo",src:"/images/cognitive-search.png",alt:"Cognitive Search"}),c.a.createElement("p",{className:"poweredby lead"},"Powered by Azure Cognitive Search"),c.a.createElement(h,{postSearchHandler:function(a){a&&""!==a||(a="*"),e.push("/search?q="+a)}})))}var O=t(135);t(106);function j(e){return console.log("result prop = ".concat(JSON.stringify(e))),c.a.createElement("div",{className:"card result"},c.a.createElement("a",{href:"/details/".concat(e.document.id)},c.a.createElement("img",{className:"card-img-top",src:e.document.image_url,alt:e.document.original_title}),c.a.createElement("div",{className:"card-body"},c.a.createElement("h6",{className:"title-style"},e.document.original_title))))}t(107);function k(e){var a=e.documents.map((function(e,a){return c.a.createElement(j,{key:a,document:e.document})})),t=Math.min(e.skip+1,e.count),n=Math.min(e.skip+e.top,e.count);return c.a.createElement("div",null,c.a.createElement("p",{className:"results-info"},"Showing ",t,"-",n," of ",e.count.toLocaleString()," results"),c.a.createElement("div",{className:"row row-cols-md-5 results"},a))}t(108);function S(e){var a=Object(n.useState)(e.currentPage),t=Object(u.a)(a,2),r=t[0],l=t[1],s=Math.ceil(e.resultCount/e.resultsPerPage);Object(n.useEffect)((function(a){e.setCurrentPage(r)}),[r,e]);var i,o,m=0,d=[],p=1,f=s;for(r-p>2&&(p=r-2),f-r>2&&(f=parseInt(r)+2),m=p;m<=f;m++)m===parseInt(r)?d.push(c.a.createElement("li",{className:"page-item active",key:m},c.a.createElement("span",{className:"page-link"},m))):d.push(c.a.createElement("li",{className:"page-item",key:m},c.a.createElement("button",{className:"page-link",id:m,onClick:function(e){return l(e.currentTarget.id)}},m)));return i=1===parseInt(r)?c.a.createElement("li",{className:"page-item disabled",key:"prev"},c.a.createElement("span",{className:"page-link"},"Previous")):c.a.createElement("li",{className:"page-item",key:"prev",onClick:function(){l(r-1)}},c.a.createElement("button",{className:"page-link"},"Previous")),o=parseInt(r)===s?c.a.createElement("li",{className:"page-item disabled",key:"next"},c.a.createElement("span",{className:"page-link"},"Next")):c.a.createElement("li",{className:"page-item",key:"next"},c.a.createElement("button",{className:"page-link",onClick:function(){l(r+1)}},"Next")),c.a.createElement("nav",{"aria-label":"...",className:"pager"},c.a.createElement("ul",{className:"pagination item"},i,d,o))}var y=t(142),x=t(134),C=t(136),w=t(140),P=t(138),F=t(141),H=t(132),I=t(133),_=t(26);t(109);function R(e){var a=Object(n.useState)(!1),t=Object(u.a)(a,2),r=t[0],l=t[1],s=e.values.map((function(a){var t=e.selectedFacets.some((function(e){return e.value===a.value}));return c.a.createElement(L,{dense:!0,disableGutters:!0,id:a.value},c.a.createElement(C.a,{edge:"start",disableRipple:!0,checked:t,onClick:t?function(){return e.removeFilter({field:e.name,value:a.value})}:function(){return e.addFilter(e.name,a.value)}}),c.a.createElement(w.a,{primary:a.value+" ("+a.count+")"}))}));return c.a.createElement("div",null,c.a.createElement(q,{disableRipple:!0,button:!0,onClick:function(){return l(!r)}},c.a.createElement(w.a,{primary:e.mapFacetName(e.name)}),r?c.a.createElement(H.a,null):c.a.createElement(I.a,null)),c.a.createElement(P.a,{in:r,component:"div"},c.a.createElement(M,null,s)))}var q=Object(_.a)(F.a)({paddingLeft:"36px !important"}),L=Object(_.a)(F.a)({paddingLeft:"46px !important"}),M=Object(_.a)(x.a)({maxHeight:340,overflowY:"auto !important",marginRight:"18px !important"});t(110);function T(e){function a(e){var a;return e=e.trim(),e=(e=(a=e)[0]?"".concat(a[0].toUpperCase()).concat(a.substring(1)):"").replace("_"," ")}function t(a,t){var n=e.filters.concat({field:a,value:t});e.setFilters(n)}function n(a){var t=e.filters.filter((function(e){return e.value!==a.value}));e.setFilters(t)}var r;try{r=Object.keys(e.facets).map((function(r){return c.a.createElement(R,{key:r,name:r,values:e.facets[r],addFilter:t,removeFilter:n,mapFacetName:a,selectedFacets:e.filters.filter((function(e){return e.field===r}))})}))}catch(s){console.log(s)}var l=e.filters.map((function(e,t){return c.a.createElement("li",{key:t},c.a.createElement(y.a,{label:"".concat(a(e.field),": ").concat(e.value),onDelete:function(){return n(e)},className:"chip"}))}));return c.a.createElement("div",{id:"facetPanel",className:"box"},c.a.createElement("div",{className:"facetbox"},c.a.createElement("div",{id:"clearFilters"},c.a.createElement("ul",{className:"filterlist"},l)),c.a.createElement(B,{component:"nav",className:"listitem"},r)))}var B=Object(_.a)(x.a)({marginTop:"32px !important"});function J(){var e,a,t,r=Object(d.g)(),l=Object(d.f)(),s=Object(n.useState)([]),i=Object(u.a)(s,2),o=i[0],m=i[1],p=Object(n.useState)(0),f=Object(u.a)(p,2),v=f[0],g=f[1],b=Object(n.useState)(1),N=Object(u.a)(b,2),j=N[0],y=N[1],x=Object(n.useState)(null!==(e=new URLSearchParams(r.search).get("q"))&&void 0!==e?e:"*"),C=Object(u.a)(x,2),w=C[0],P=C[1],F=Object(n.useState)(null!==(a=new URLSearchParams(r.search).get("top"))&&void 0!==a?a:8),H=Object(u.a)(F,1)[0],I=Object(n.useState)(null!==(t=new URLSearchParams(r.search).get("skip"))&&void 0!==t?t:0),_=Object(u.a)(I,2),R=_[0],q=_[1],L=Object(n.useState)([]),M=Object(u.a)(L,2),B=M[0],J=M[1],D=Object(n.useState)({}),U=Object(u.a)(D,2),z=U[0],A=U[1],G=Object(n.useState)(!0),K=Object(u.a)(G,2),V=K[0],W=K[1],Y=H;Object(n.useEffect)((function(){W(!0),q((j-1)*H);var e={q:w,top:H,skip:R,filters:B};E.a.post("/api/search",e).then((function(e){m(e.data.results),A(e.data.facets),g(e.data.count),W(!1)})).catch((function(e){console.log(e),W(!1)}))}),[w,H,R,B,j]),Object(n.useEffect)((function(){l.push("/search?q="+w),y(1),J([])}),[w]);var Q;return Q=V?c.a.createElement("div",{className:"col-md-9"},c.a.createElement(O.a,null)):c.a.createElement("div",{className:"col-md-9"},c.a.createElement(k,{documents:o,top:H,skip:R,count:v}),c.a.createElement(S,{className:"pager-style",currentPage:j,resultCount:v,resultsPerPage:Y,setCurrentPage:y})),c.a.createElement("main",{className:"main main--search container-fluid"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-3"},c.a.createElement("div",{className:"search-bar"},c.a.createElement(h,{postSearchHandler:function(e){P(e)},q:w})),c.a.createElement(T,{facets:z,filters:B,setFilters:J})),Q))}var D=t(139);t(111);function U(){var e=Object(d.h)().id,a=Object(n.useState)({}),t=Object(u.a)(a,2),r=t[0],l=t[1],s=Object(n.useState)(0),i=Object(u.a)(s,2),o=i[0],m=i[1],p=Object(n.useState)(!0),f=Object(u.a)(p,2),v=f[0],g=f[1];Object(n.useEffect)((function(){g(!0),E.a.get("/api/lookup?id="+e).then((function(e){var a=e.data.document;l(a),g(!1)})).catch((function(e){console.log(e),g(!1)}))}),[e]);var b,h=c.a.createElement(O.a,null),N="nav-link",j="nav-link";!v&&r&&(0===o?(N+=" active",h=c.a.createElement("div",{className:"card-body"},c.a.createElement("h5",{className:"card-title"},r.original_title),c.a.createElement("img",{className:"image",src:r.image_url,alt:"Book cover"}),c.a.createElement("p",{className:"card-text"},null===(b=r.authors)||void 0===b?void 0:b.join("; ")," - ",r.original_publication_year),c.a.createElement("p",{className:"card-text"},"ISBN ",r.isbn),c.a.createElement(D.a,{name:"half-rating-read",value:parseInt(r.average_rating),precision:.1,readOnly:!0}),c.a.createElement("p",{className:"card-text"},r.ratings_count," Ratings"))):(j+=" active",h=c.a.createElement("div",{className:"card-body text-left"},c.a.createElement("pre",null,c.a.createElement("code",null,JSON.stringify(r,null,2))))));return c.a.createElement("main",{className:"main main--details container fluid"},c.a.createElement("div",{className:"card text-center result-container"},c.a.createElement("div",{className:"card-header"},c.a.createElement("ul",{className:"nav nav-tabs card-header-tabs"},c.a.createElement("li",{className:"nav-item"},c.a.createElement("button",{className:N,onClick:function(){return m(0)}},"Result")),c.a.createElement("li",{className:"nav-item"},c.a.createElement("button",{className:j,onClick:function(){return m(1)}},"Raw Data")))),h))}t(112);function z(){var e=Object(n.useState)({}),a=Object(u.a)(e,2),t=a[0],r=a[1];function l(){return(l=Object(o.a)(i.a.mark((function e(){var a,t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/.auth/me");case 2:(a=e.sent)&&(t=a.headers.get("content-type"))&&-1!==t.indexOf("application/json")&&a.json().then((function(e){return r(e)})).catch((function(e){return console.error("Error:",e)}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){!function(){l.apply(this,arguments)}()}),[]),c.a.createElement(p.Provider,{value:t},c.a.createElement("div",{className:"container-fluid app"},c.a.createElement(v,null),c.a.createElement(m.a,null,c.a.createElement(d.c,null,c.a.createElement(d.a,{path:"/",exact:!0,component:N}),c.a.createElement(d.a,{path:"/search",component:J}),c.a.createElement(d.a,{path:"/details/:id",component:U})))))}l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(z,null)),document.getElementById("root"))},55:function(e,a,t){},73:function(e,a,t){e.exports=t(113)},79:function(e,a,t){},98:function(e,a,t){},99:function(e,a,t){}},[[73,1,2]]]);
//# sourceMappingURL=main.b2a3f736.chunk.js.map